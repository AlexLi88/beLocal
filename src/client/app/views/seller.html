<div ng-show="showWarning" class="alert alert-warning alert-dismissible" role="alert">
  <button type="button" class="close" ng-click="resetWarning()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  <html-comp content="warningHTML"></html-comp>
</div>
<nav-bar></nav-bar>

<div class="container-fluid new-formatting-container">  
    <br><br>
    <div class="row vendor-profile-header">
        <div class="col-md-5 new-vendor-avatar">
            <img src="http://www.sexyli.com/wp-content/uploads/2013/05/Green-Snake-Image-Wallpaper.jpg">
        </div>
        <div class="vendor-header-content">

            <span class="new-vendor-name-style">
                {{StateService.getCurrentUser().first_name}} {{StateService.getCurrentUser().last_name}}
            </span>
            <br>
            <span class="new-hr-heading-style">
                <span class="glyphicon glyphicon-map-marker"></span>City, Province
                | Webpage | Twitter | Facebook
            </span>
            <hr>
            <div class="description-container">
                blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah 
            </div>
        </div>
    </div>


<!--Display Seller's Locations-->
    <hr>
    <div class="row">
        <div class="col-xs-9 new-hr-heading-style">
            YOUR SELLING LOCATIONS
        </div>
        <div class="col-xs-3">
            <button class="btn beLocal-btn-filled pull-right" data-toggle="modal" ng-click="resetLocationModal()" data-target="#locationModal">Create New Location</button>
        </div>
    </div>
    <hr>

<!-- NG-REPEAT FOR MARKETS -->
    <div class="new-heading-style">
            Market Locations
    </div>
    <!-- repeating for each location that seller has in the db -->
    <div ng-repeat="location in sellerLocations" class="container-for-cards">
        <div class="card-formatting">
            <div class="row">

                <!-- Display the locations name -->
                <div class="col-xs-9">
                    <h4>{{location.name}}</h4> 
                </div>

                <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                <div class="col-xs-3 edit-delete-buttons">
                    <span data-toggle="tooltip" data-placement="bottom" title="Edit Location">
                        <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#locationModal" ng-click="editLocation(location)"></span>
                    </span>
                    <span data-toggle="tooltip" data-placement="bottom" title="Delete Location">
                        <span class="edit-text glyphicon glyphicon-trash" ng-click="deleteLocation(location)" data-toggle="modal" data-target="TBA"></span>
                    </span>
                </div> 

            </div>

            <div class="">

                <p ng-show="location.date"><b>DATE:</b>
                    {{location.date | date:" EEEE',' MMMM d'"}},
                    {{location.address.hours[0].from_hour}} - 
                    {{location.address.hours[0].to_hour}}
                </p>
                <p><b>LOCATION:</b>
                    {{location.address.addr_line1}},
                    {{location.address.city}}, 
                    {{location.address.state}}, 
                    {{location.address.zipcode}}
                </p>

                <p><b>CONTACT INFORMATION:</b>
                    {{location.phone}} | {{location.email}}
                </p>

                <p><b>DETAILS:</b>
                    {{location.description}}
                </p>
                </div>
        </div>

    </div>
    <!-- end of repeating for each market that seller has in the db -->


<!-- NG-REPEAT FOR CUSTOM LOCATIONS -->
    <div class="new-heading-style">
            Custom Locations
    </div>
    <!-- repeating for each location that seller has in the db -->
    <div ng-repeat="location in sellerLocations" class="container-for-cards">
        <div class="card-formatting">
            <div class="row">

                <!-- Display the locations name -->
                <div class="col-xs-9">
                    <h4>{{location.name}}</h4> 
                </div>

                <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                <div class="col-xs-3 edit-delete-buttons">
                    <span data-toggle="tooltip" data-placement="bottom" title="Edit Location">
                        <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#locationModal" ng-click="editLocation(location)"></span>
                    </span>
                    <span data-toggle="tooltip" data-placement="bottom" title="Delete Location">
                        <span class="edit-text glyphicon glyphicon-trash" ng-click="deleteLocation(location)" data-toggle="modal" data-target="TBA"></span>
                    </span>
                </div> 

            </div>

            <div class="something">

                <p><b>DATE:</b>
                    {{location.start_time | date:" EEEE',' MMMM d',' h:mma' - '"}}
                    {{location.end_time | date:" h:mma"}}
                </p>
                <p><b>LOCATION:</b>
                    {{location.address.addr_line1}},
                    {{location.address.city}}, 
                    {{location.address.state}}, 
                    {{location.address.zipcode}}
                </p>

                <p><b>CONTACT INFORMATION:</b>
                    {{location.phone}} | {{location.email}}
                </p>

                <p><b>DETAILS:</b>
                    {{location.description}}
                </p>
                </div>
        </div>
    </div>
<!-- end of repeating for each custom location that seller has in the db -->


<br><br>
<!--Display Seller's Inventory-->
    <hr>
    <div class="row">
        <div class="col-xs-9 new-hr-heading-style">
            YOUR INVENTORY
        </div>
        <div class="col-xs-3">
            <button class="btn beLocal-btn-filled btn-md pull-right" data-toggle="modal" data-target="#itemModal" ng-click="resetItemModal()">Create New Item</button>
        </div>
    </div>
    <hr>


    <!-- repeating for each item that seller has in the db -->
     <div ng-repeat="product in sellerItems | orderBy:'name'" class="container-for-cards">

            <!-- Need this div to allow for space between each of the sellers items -->
            <div class="card-formatting">
                <div class="row">

                <!-- Display the locations name -->
                    <div class="col-sm-2 hidden-xs vendor-product-image">
                        <img ng-src="{{product.photo.image_url}}"/>

                    </div>
                    <div class="col-xs-9 col-sm-7">
                        <h4>{{product.name}}</h4>
                        {{product.description}}
                    </div>

                    <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                    <div class="col-xs-3 edit-delete-buttons">
                        <span data-toggle="tooltip" data-placement="bottom" title="Edit Item">
                            <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#itemModal" ng-click="editItem(product)"></span>
                        </span>
                        <span data-toggle="tooltip" data-placement="bottom" title="Delete Item">
                            <span class="edit-text glyphicon glyphicon-trash" ng-click="deleteProduct(product)" data-toggle="modal" data-target="TBA"></span>
                        </span>
                    </div> 
                </div>

            <!-- THIS IS THE NON-REPEATING PART -->
            <div class="row">
                <div class="col-sm-12 seller-stock-formatting">
                    <hr>
                    <b>Current Availability:</b>
                    <span class="pull-right">
                        <input type="radio" ng-change="stockValueChanged(product)" ng-model="product.stock" name="stock{{$index}}" value="IS"> In Stock
                        <input type="radio" ng-change="stockValueChanged(product)" ng-model="product.stock" name="stock{{$index}}" value="OOS"> Out of Stock
                    </span>
                </div>
            </div>
        </div>
        <!--  end of repeat for each seller's items location -->

    </div>
    <!--  end of repeat for each item the seller sells-->

</div>
<div class="footer">
  <p>â™¥ from the beLocal team</p>
</div>
<!-- END OF CONTAINTER-SELLER -->



<!-- START OF MODALS -->

<!-- Seller Add/Edit Item Modal -->
<div class="modal fade" id="itemModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 ng-hide="isEditingItem" class="modal-title">Add New Item<br /><small>Please complete the following fields to add a new item</small></h4>
                <h4 ng-show="isEditingItem" class="modal-title">Edit Item<br /><small>Please change any of the fields below to update an existing item</small></h4>                
            </div>
            <div class="modal-body">  
                <div class="container-fluid">                   
                    <form role="form" name="itemForm" novalidate>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.imageField.$invalid }">
                                    <label ng-hide="isEditingItem" for="item-image">Add Image</label>
                                    <label ng-show="isEditingItem" for="item-image">Change Image</label><br />
                                    <img ng-show="displayItemThumbnail" src="#" id="itemPreview" />                                    
                                    <input onchange="angular.element(this).scope().fileNameChanged(this.files)" name="imageField" type="file" id="item-image">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.itemField.$invalid }">
                                    <label for="item-name">Item Name</label>
                                    <input required ng-model="itemName" type="text" name="itemField" class="form-control" id="item-name" placeholder="Item Name"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.descriptionField.$invalid }">
                                    <label for="item-name">Item Description</label>
                                    <textarea required ng-model="itemDescription" type="text" name="descriptionField" class="form-control" id="item-name" placeholder="Item Description"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div ng-hide="isEditingItem" class="form-group no-bottom-margin">
                                    <label for="item-name">Item Stock<br></label>
                                    <div>
                                        <input type="radio" ng-model="newItemStock" name="newItemStock" value="IS"><span class="radio-padding-right"> In Stock</span>
                                        <input type="radio" ng-model="newItemStock" name="newItemStock" value="OOS"> Out of Stock
                                    </div>
                                </div>
                            </div>                        
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="newItemSubmit()" class="btn beLocal-btn-filled">{{submitItemButtonText}}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- Seller Add/Edit Location Modal  -->
<div class="modal fade" id="locationModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 ng-hide="isEditingLocation" class="modal-title">Add New Location<br /><small>Please complete the following fields to add a new location</small></h4>
                <h4 ng-show="isEditingLocation" class="modal-title">Edit Location<br /><small>Please change any of the fields below to update an existing location</small></h4>                
            </div>
            <div class="modal-body">  
                <div class="container-fluid">                   
                    <form role="form" name="locationForm" novalidate>
                        <div class="row">
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Location Type</label><br />
                                    <label class="radio-inline">
                                      <input type="radio" ng-model="locationType" name="locationTypeOptions" id="farmRadio" value="true"><p>One Time</p>
                                    </label>
                                    <label class="radio-inline">
                                      <input type="radio" ng-model="locationType" name="locationTypeOptions" id="marketRadio" value="false"><p>Regular Hours</p>
                                    </label>                            
                                </div>
                            </div>                        
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.locationField.$invalid }">
                                    <label class="control-label">Location Name</label>
                                    <input required ng-model="locationName" type="text" name="locationField" class="form-control" id="item-name" placeholder="Location Name"/>
                                </div>
                            </div>
                        </div>
                        <div ng-show="locationType" class="row">
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group">
                                  <label>Date:</label>                      
                                  <div class="input-group" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.dateField.$invalid }">
                                    <input required type="text" name="dateField" class="form-control date-picker" show-weeks="false" show-button-bar="false" datepicker-popup="MM/dd/yyyy" ng-model="locationDate" is-open="opened" min="minDate" max="'2015-06-22'" close-text="Close" />
                                    <span class="input-group-btn">
                                      <button class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>                       
                                  </div>
                                </div>                               
                            </div>                        
                            <div class="col-xs-3 col-md-3">
                                <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.startField.$invalid}">
                                    <label class="control-label"><i class="fa fa-clock-o"></i>Start Time</label>
                                    <input required type="text" class="form-control" size="8" ng-model="startTime" name="startField" bs-timepicker>
                                </div>
                            </div>
                            <div class="col-xs-3 col-md-3">
                                <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.endField.$invalid}">
                                    <label class="control-label"><i class="fa fa-clock-o"></i>End Time</label>
                                    <input required type="text" class="form-control" size="8" ng-model="endTime" name="endField" bs-timepicker>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                  <div class="form-group" ng-class="{ 'has-error' : (locationForm.addressText.$invalid ) && newLocationSubmitted }">
                                    <label class="control-label">Address</label>
                                    <input type="text" autocomplete="off" name="addressText" typeahead="result.formatted_address for result in getLocation($viewValue)" typeahead-on-select="makeSelection($item)" class="form-control" ng-model="addressSearchText" placeholder="Search for an Address" required>
                                  </div>
                            </div>                                                                                               
                        </div>                                            
                        <div class="row">
                            <div class="col-xs-6 col-md-6" ng-class="{'has-error': newLocationSubmitted && locationForm.phoneField.$invalid}">
                                <div class="form-group">
                                    <label class="control-label">Phone Number</label>
                                    <input required ng-model="phoneAtLocation" type="text" class="form-control" id="item-name" name="phoneField" placeholder="Phone Number"/>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.emailField.$invalid}">
                                    <label class="control-label">Email</label>
                                    <input required type="text" ng-model="emailAtLocation" class="form-control" id="item-name" name="emailField" placeholder="Email"/>
                                </div>
                            </div>                                                                   
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group no-bottom-margin" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.locationDescriptionField.$invalid }">
                                    <label class="control-label">Location Details</label>
                                    <textarea required ng-model="locationDescription" type="text" name="locationDescriptionField" class="form-control" placeholder="Location Details"/>
                                </div>
                            </div>                        
                        </div>                                                          
                    </form>
                </div>
            </div>
            <div class="modal-footer no-top-margin">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="newLocationSubmit()" class="beLocal-btn-filled btn">{{submitLocationButtonText}}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>