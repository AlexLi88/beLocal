<nav-bar></nav-bar>
<div class="jumbotron beLocal-header-seller">
    <div class="container">
    </div>
</div>

<!--Seller-Navigation-->
<div class="seller-banner">
    <div class="seller-Avatar col-sm-3">
        <div class="AvatarContainer">
            <img src="http://gradschool.oregonstate.edu/sites/gradschool.oregonstate.edu/files/styles/square_medium/public/default_images/user_icon.png?itok=mbz2tJug">
        </div>
    </div>
    <div class="seller-Name col-sm-9">
        <h1>{{StateService.getCurrentUser().name}}</h1>
    </div>
</div>
<div class="seller-tabs">
    <div class="seller-tabs col-md-offset-3">
        <ul class="nav nav-pills nav-justified">
            <li class="active"><a href="#">Home</a></li>
            <li><a class="inactive" href="#">Profile</a></li>
            <li><a class="inactive" href="#">Messages</a></li>
        </ul>
    </div>
</div>
<!--Seller-Navigation End-->


<div class="container container-seller">
<br>    

<!--Display Seller's Locations-->
    <div class="row">
        <div class="col-xs-9 seller-title-bar">
            <h3>Your Locations</h3>
        </div>
        <div class="col-xs-3 add-new-button-container">
            <button class="btn beLocal-btn-filled btn-md pull-right" data-toggle="modal" ng-click="resetLocationModal()" data-target="#locationModal">Create New Location</button>

        </div>
    </div>

    <!-- repeating for each location that seller has in the db -->
    <div ng-repeat="location in sellerLocations">
        <div class="list-group-item">
            <div class="row">

                <!-- Display the locations name -->
                <div class="col-xs-9">
                    <h4>{{location.name}}</h4> 
                </div>

                <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                <div class="col-xs-3 edit-text-container">
                    <span data-toggle="tooltip" data-placement="bottom" title="Edit Location">
                        <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#locationModal" ng-click="editLocation(location)"></span>
                    </span>
                    <span data-toggle="tooltip" data-placement="bottom" title="Delete Location">
                        <span class="edit-text glyphicon glyphicon-trash" data-toggle="modal" data-target="TBA"></span>
                    </span>
                </div> 

            </div>

            <div class="well">

                <p><b>DATE:</b>
                    {{location.start_time | date:" EEEE',' MMMM d',' h:mma' - '"}}
                    {{location.end_time | date:" h:mma"}}
                </p>
                <p><b>LOCATION:</b>
                    {{location.address.addr_line1}},
                    {{location.address.city}}, 
                    {{location.address.state}}, 
                    {{location.address.zipcode}}
                </p>

                <p><b>CONTACT INFORMATION:</b>
                    {{location.phone}} | {{location.email}}
                </p>

                <p><b>DETAILS:</b>
                    {{location.description}}
                </p>
                </div>
        </div>
        <br>
    </div>
<!-- end of repeating for each location that seller has in the db -->



<!--Display Seller's Inventory-->

   <div class="row">
        <div class="col-xs-10 seller-title-bar">
            <h3>Your Inventory</h3>
        </div>
        <div class="col-xs-2 add-new-button-container">
            <button class="btn beLocal-btn-filled btn-md pull-right" data-toggle="modal" data-target="#itemModal" ng-click="resetItemModal()">Create New Item</button>
        </div>
    </div>



<!-- repeating for each item that seller has in the db -->
 <div ng-repeat="product in sellerItems">

        <!-- Need this div to allow for space between each of the sellers items -->
        <div class="list-group-item" >
            <div class="row item-content-container">

            <!-- Display the locations name -->
                <div class="col-xs-2 thumbnail hidden-xs">
                    <img ng-src="{{product.photo.image_url}}"/>

                </div>
                <div class="col-xs-9 col-sm-7">
                    <h4>{{product.name}}</h4>
                    {{product.description}}
                </div>

                <!-- Display icons which link to corresponding modals (tooltips are outer span tag) -->
                <div class="col-xs-3 edit-text-container">
                    <span data-toggle="tooltip" data-placement="bottom" title="Edit Item">
                        <span class="edit-text glyphicon glyphicon-edit" data-toggle="modal" data-target="#itemModal" ng-click="editItem(item)"></span>
                    </span>
                    <span data-toggle="tooltip" data-placement="bottom" title="Delete Item">
                        <span class="edit-text glyphicon glyphicon-trash" data-toggle="modal" data-target="TBA"></span>
                    </span>
                </div> 
            </div>

        <!-- THIS IS THE NON-REPEATING PART -->
        <div class="row all-locations seller-item-stock">
            <div class="col-sm-4 ">
                <b>Stock</b>
            </div>
            <div class="col-sm-8 seller-item">
                <input type="radio" ng-change="stockValueChanged(product)" ng-model="product.stock" name="stock{{$index}}" value="IS"> In Stock
                <input type="radio" ng-change="stockValueChanged(product)" ng-model="product.stock" name="stock{{$index}}" value="OOS"> Out of Stock
            </div>
        </div>
    </div>
    <br>
    <!--  end of repeat for each seller's items location -->

</div>
<!--  end of repeat for each item the seller sells-->

</div>
<!-- END OF CONTAINTER-SELLER -->


<!-- Seller Add/Edit Item Modal -->
<div class="modal fade" id="itemModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 ng-hide="isEditingItem" class="modal-title">Add New Item<br /><small>Please complete the following fields to add a new item</small></h4>
                <h4 ng-show="isEditingItem" class="modal-title">Edit Location<br /><small>Please change any of the fields below to update an existing item</small></h4>                
            </div>
            <div class="modal-body">  
                <div class="container-fluid">                   
                    <form role="form" name="itemForm" novalidate>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.itemField.$invalid }">
                                    <label for="item-name">Item Name</label>
                                    <input required ng-model="itemName" type="text" name="itemField" class="form-control" id="item-name" placeholder="Item Name"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.descriptionField.$invalid }">
                                    <label for="item-name">Item Description</label>
                                    <textarea required ng-model="itemDescription" type="text" name="descriptionField" class="form-control" id="item-name" placeholder="Item Description"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group" ng-class="{ 'has-error' : newItemSubmitted && itemForm.imageField.$invalid }">
                                    <label for="item-image">Upload Image</label>
                                    <input onchange="angular.element(this).scope().fileNameChanged(this.files)" name="imageField" type="file" id="item-image">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="newItemSubmit()" class="btn btn-primary">{{submitItemButtonText}}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- Seller Add/Edit Location Modal  -->
<div class="modal fade" id="locationModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 ng-hide="isEditingLocation" class="modal-title">Add New Location<br /><small>Please complete the following fields to add a new location</small></h4>
                <h4 ng-show="isEditingLocation" class="modal-title">Edit Location<br /><small>Please change any of the fields below to update an existing location</small></h4>                
            </div>
            <div class="modal-body">  
                <div class="container-fluid">                   
                    <form role="form" name="locationForm" novalidate>
                        <div class="row">
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.locationField.$invalid }">
                                    <label for="item-name">Location Name</label>
                                    <input required ng-model="locationName" type="text" name="locationField" class="form-control" id="item-name" placeholder="Location Name"/>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group">
                                    <label for="item-name">Location Type</label><br />
                                    <label class="radio-inline">
                                      <input type="radio" ng-model="locationType" name="locationTypeOptions" id="farmRadio" value="FAR"><p>Farm</p>
                                    </label>
                                    <label class="radio-inline">
                                      <input type="radio" ng-model="locationType" name="locationTypeOptions" id="marketRadio" value="MAR"><p>Market</p>
                                    </label>                            
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group">
                                  <label>Start date:</label>                      
                                  <div class="input-group" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.dateField.$invalid }">
                                    <input required type="text" name="dateField" class="form-control date-picker" show-weeks="false" show-button-bar="false" datepicker-popup="MM/dd/yyyy" ng-model="locationDate" is-open="opened" min="minDate" max="'2015-06-22'" close-text="Close" />
                                    <span class="input-group-btn">
                                      <button class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                    </span>                       
                                  </div>
                                </div>                               
                            </div>                        
                            <div class="col-xs-3 col-md-3">
                                <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.startField.$invalid}">
                                    <label class="control-label"><i class="fa fa-clock-o"></i>Start Time</label>
                                    <input required type="text" class="form-control" size="8" ng-model="startTime" name="startField" bs-timepicker>
                                </div>
                            </div>
                            <div class="col-xs-3 col-md-3">
                                <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.endField.$invalid}">
                                    <label class="control-label"><i class="fa fa-clock-o"></i>End Time</label>
                                    <input required type="text" class="form-control" size="8" ng-model="endTime" name="endField" bs-timepicker>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="well">
                                <div class="row">
                                    <div class="col-xs-12 col-md-12" ng-class="{'has-error': newLocationSubmitted && locationForm.addressField.$invalid}">
                                        <div class="form-group">
                                            <label for="item-name">Street Address</label>
                                            <input required ng-model="locationAddress" type="text" class="form-control" id="item-name" name="addressField" placeholder="Address"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-6 col-md-6">
                                        <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.cityField.$invalid}">
                                            <label for="item-name">City</label>
                                            <input required ng-model="locationCity" type="text" class="form-control" id="item-name" name="cityField" placeholder="City"/>
                                        </div>
                                    </div>
                                    <div class="col-xs-6 col-md-6" ng-class="{'has-error': newLocationSubmitted && locationForm.provinceField.$invalid}">
                                        <div class="form-group">
                                            <label for="item-name">Province</label>
                                            <input required ng-model="locationProvince" type="text" class="form-control" id="item-name" name="provinceField" placeholder="Province"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-6 col-md-6">
                                        <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.postalCodeField.$invalid}">
                                            <label for="item-name">Postal Code</label>
                                            <input required type="text" ng-model="locationPostalCode" class="form-control" id="item-name" name="postalCodeField" placeholder="Postal Code"/>
                                        </div>
                                    </div>                                                                  
                                    <div class="col-xs-6 col-md-6" ng-class="{'has-error': newLocationSubmitted && locationForm.countryField.$invalid}">
                                        <div class="form-group">
                                            <label for="item-name">Country</label>
                                            <input required ng-model="locationCountry" type="text" class="form-control" id="item-name" name="countryField" placeholder="Country"/>
                                        </div>
                                    </div>                                  
                                </div>                                                                                                 
                            </div>
                        </div>                                            
                        <div class="row">
                            <div class="col-xs-6 col-md-6" ng-class="{'has-error': newLocationSubmitted && locationForm.phoneField.$invalid}">
                                <div class="form-group">
                                    <label for="item-name">Phone Number</label>
                                    <input required ng-model="phoneAtLocation" type="text" class="form-control" id="item-name" name="phoneField" placeholder="Phone Number"/>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-6">
                                <div class="form-group" ng-class="{'has-error': newLocationSubmitted && locationForm.emailField.$invalid}">
                                    <label for="item-name">Email</label>
                                    <input required type="text" ng-model="emailAtLocation" class="form-control" id="item-name" name="emailField" placeholder="Email"/>
                                </div>
                            </div>                                                                   
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group no-bottom-margin" ng-class="{ 'has-error' : newLocationSubmitted && locationForm.locationDescriptionField.$invalid }">
                                    <label for="item-name">Location Description</label>
                                    <textarea required ng-model="locationDescription" type="text" name="locationDescriptionField" class="form-control" placeholder="Location Description"/>
                                </div>
                            </div>                        
                        </div>                                                          
                    </form>
                </div>
            </div>
            <div class="modal-footer no-top-margin">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" ng-click="newLocationSubmit()" class="btn btn-primary">{{submitLocationButtonText}}</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>